// @include "basil.js";// @include "./lib/underscore.js";function draw() {  // get name of active script w/o file extension  var scriptName = (new File($.fileName)).name.slice(0, -4);  // get selection, filtered by TextFrame  var selection = b.selections();  selection = _.filter(    selection,    function(item) { return item.constructor.name === "TextFrame"}  );  if (selection.length === 0) { alert("Please select some TextFrames") };  // create/use dedicated layer and color for results  var layer = b.layer(scriptName);  var color = b.color(128,128,128, scriptName);  b.noFill();  b.stroke(color);  b.strokeWeight(1);  // process selection  _.each(selection, function(textFrame) {    var lines = textFrame.lines;    for (var i = 0; i < lines.length-1; i++) {      var bbox = b.bounds(lines[i]);      var bboxNext = b.bounds(lines[i+1]);      // special cases, end of line is      // space (32) or carriage return (13)      var lastChar = _.last(lines[i].characters);      var charCode = lastChar.contents.charCodeAt(0);      if (charCode === 13 || charCode === 32) {        bbox.right = b.bounds(lines[i].insertionPoints[-2]).right;      }      // y postion centered between this and next line      var diff = (bboxNext.top - bbox.baseline);      var y = bbox.baseline + diff/2;      b.line(        bbox.right,        y,        bboxNext.left,        y,      );      // arc left      b.arc(        bbox.left,        y + diff/2,        diff,        diff,        b.HALF_PI,        b.HALF_PI*3      );      // arc right      b.arc(        bbox.right,        y - diff/2,        diff,        diff,        -b.HALF_PI,        b.HALF_PI      );    }  });}b.go(b.MODESILENT);